# Bundle Bench

## Execute bench on your machine

```sh
# 1. build all dependencies
yarn build --to @fluentui/react-menu

# 2. run bundle-size bench
yarn workspace @fluentui/react-menu bundle-size:bench
```

## Package(react-menu) Bundles

```
┌────────────────┬───────┬─────────────┬─────────────┐
│    (index)     │  raw  │     min     │    gzip     │
├────────────────┼───────┼─────────────┼─────────────┤
│   rollup.js    │ 53237 │ '53.237 kB' │ '10.623 kB' │
│ rollup.min.js  │ 20314 │ '20.314 kB' │ '6.041 kB'  │
│   esbuild.js   │ 52335 │ '52.335 kB' │ '9.335 kB'  │
│ esbuild.min.js │ 24959 │ '24.959 kB' │ '7.321 kB'  │
└────────────────┴───────┴─────────────┴─────────────┘
```

## App(Fixture) Bundles

### Bundle with transpiled only files

```
Webpack:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 102840 │ '102.84 kB'  │ '31.718 kB' │
│ menuSelectable │ 105091 │ '105.091 kB' │ '32.083 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
ESBuild:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 162135 │ '162.135 kB' │ '44.363 kB' │
│ menuSelectable │ 164581 │ '164.581 kB' │ '45.012 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
Rollup:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 120390 │ '120.39 kB'  │ '36.878 kB' │
│ menuSelectable │ 122636 │ '122.636 kB' │ '37.213 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
```

### Bundle with bundled package via rollup

```
Webpack:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 121837 │ '121.837 kB' │ '38.01 kB'  │
│ menuSelectable │ 121867 │ '121.867 kB' │ '38.025 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
ESBuild:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 162135 │ '162.135 kB' │ '44.363 kB' │
│ menuSelectable │ 164581 │ '164.581 kB' │ '45.012 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
Rollup:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 139557 │ '139.557 kB' │ '43.082 kB' │
│ menuSelectable │ 139590 │ '139.59 kB'  │ '43.102 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
```

### Bundle with bundled package via esbuild

```
Webpack:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 122463 │ '122.463 kB' │ '38.139 kB' │
│ menuSelectable │ 122489 │ '122.489 kB' │ '38.154 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
ESBuild:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 162135 │ '162.135 kB' │ '44.363 kB' │
│ menuSelectable │ 164581 │ '164.581 kB' │ '45.012 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
Rollup:
┌────────────────┬────────┬──────────────┬─────────────┐
│    (index)     │  raw   │     min      │    gzip     │
├────────────────┼────────┼──────────────┼─────────────┤
│      menu      │ 140208 │ '140.208 kB' │ '43.242 kB' │
│ menuSelectable │ 140237 │ '140.237 kB' │ '43.262 kB' │
└────────────────┴────────┴──────────────┴─────────────┘
```

## Summary

Based on our measurements we have following recommendations:

- best possible approach **how to ship package to NPM** is ship only transpiled file to vanilla javascript
- best possible approach **how to bundle packages in applications** is via using webpack
